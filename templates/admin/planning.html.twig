{% extends 'baseadmin.html.twig' %}

{% block title %}Planning{% endblock %}

{% block body %}

    <div>

        <h2>Aujourd'hui : {{ date| format_datetime(locale='fr',pattern="dd-MM-Y") }}</h2>

        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Nombre de place</th>
                    <th>Arrivee</th>
                    <th>Depart</th>
                </tr>
            </thead>
            <tbody>

                {% for key ,date in dates %}

                    {% if key | format_datetime(locale='fr',pattern="dd") == 01  %}

                        <tr>
                            <td colspan="4"><h2>{{ key | format_datetime(locale='fr',pattern="LLLL") | capitalize }}</h2></td>
                        </tr>

                    {% endif %}

                    <tr>
                        <td><a href='{{ path('app_admin_planning_jour', {'date' : key | format_datetime(locale='fr',pattern="Y-MM-dd") })  }}'>{{ key | format_datetime(locale='fr',pattern="EEEE : dd-MM-Y") | capitalize  }}</a></td>
                        {% if date.nombrePlaceDisponibles > 15 %}
                            <td class='planning_vert'>{{ date.nombrePlaceDisponibles }}</td>
                        {% elseif date.nombrePlaceDisponibles > 10 %}
                            <td class='planning_orange'>{{ date.nombrePlaceDisponibles }}</td>
                        {% else %}
                            <td class='planning_rouge'>{{ date.nombrePlaceDisponibles }}</td>
                        {% endif %}

                        <td>{{ date.Arrivee }}</td>
                        <td>{{ date.Depart }}</td>
                    </tr>

                {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}
